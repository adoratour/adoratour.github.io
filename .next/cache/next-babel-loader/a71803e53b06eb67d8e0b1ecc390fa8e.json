{"ast":null,"code":"import _Breadcrumb from \"antd/lib/breadcrumb\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\TripFinder\\\\packages\\\\hotel-next\\\\pages\\\\travel.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport Head from 'next/head';\nimport SectionTourGrid from 'components/SectionTourGrid/SectionTourGrid';\nimport { PostPlaceholder } from 'components/UI/ContentLoader/ContentLoader';\nimport { SearchContext } from 'context/SearchProvider';\nimport GetAPIData, { Paginator, SearchedData, SearchStateKeyCheck, ProcessAPIData } from 'library/helpers/get_api_data';\nimport { getDeviceType } from 'library/helpers/get_device_type';\nimport { SINGLE_POST_PAGE } from 'settings/constant';\nimport { LISTING_PAGE_POST_LIMIT, LISTING_PAGE_COLUMN_WIDTH_NORMAL } from 'settings/config';\nimport ListingWrapper, { PostsWrapper, SearchWrapper, BreadcrumbWrapper } from 'container/Listing/Listing.style'; // import SearchForm from '../container/Home/Search/SearchForm';\n\nimport Sort from 'components/UI/Sort/Sort';\nimport TripSearchForm from '../container/Home/TripSearch/TripSearchForm';\nexport default function ListingPage({\n  processedData,\n  deviceType\n}) {\n  const {\n    state,\n    dispatch\n  } = useContext(SearchContext);\n  const statekey = SearchStateKeyCheck(state);\n  const {\n    0: posts,\n    1: setPosts\n  } = useState(processedData.slice(0, LISTING_PAGE_POST_LIMIT) || []);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  useEffect(() => {\n    if (statekey === true) {\n      const newData = SearchedData(processedData);\n      setPosts(newData);\n    } else {\n      setPosts(processedData.slice(0, LISTING_PAGE_POST_LIMIT) || []);\n    }\n  }, [statekey]);\n\n  const handleLoadMore = () => {\n    setLoading(true);\n    setTimeout(() => {\n      const data = Paginator(posts, processedData, LISTING_PAGE_POST_LIMIT);\n      setPosts(data);\n      setLoading(false);\n    }, 1000);\n  };\n\n  let columnWidth = LISTING_PAGE_COLUMN_WIDTH_NORMAL;\n  return __jsx(ListingWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"Tour du l\\u1ECBch tr\\u1ECDn g\\xF3i\")), __jsx(BreadcrumbWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, __jsx(_Breadcrumb, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, __jsx(_Breadcrumb.Item, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"Trang ch\\u1EE7\")), __jsx(_Breadcrumb.Item, {\n    href: \"/tour\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, \"T\\u1EA5t c\\u1EA3 tour\")))), __jsx(\"img\", {\n    src: \"https://bizweb.dktcdn.net/100/374/261/themes/747465/assets/cat-banner-2.jpg?1609693765185\",\n    alt: \"banner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }), __jsx(PostsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, __jsx(TripSearchForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  })), __jsx(SearchWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, __jsx(Sort, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  })), __jsx(PostsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, __jsx(SectionTourGrid, {\n    link: SINGLE_POST_PAGE,\n    columnWidth: columnWidth,\n    deviceType: deviceType,\n    data: posts,\n    totalItem: processedData.length,\n    limit: LISTING_PAGE_POST_LIMIT,\n    loading: loading,\n    handleLoadMore: handleLoadMore,\n    placeholder: __jsx(PostPlaceholder, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 24\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  })));\n}\nexport async function getServerSideProps(context) {\n  const {\n    req\n  } = context;\n  const apiUrl = [{\n    endpoint: 'hotel',\n    name: 'listingHotel'\n  }];\n  const pageData = await GetAPIData(apiUrl);\n  const processedData = ProcessAPIData(pageData);\n  const deviceType = getDeviceType(req);\n  return {\n    props: {\n      processedData,\n      deviceType\n    }\n  };\n}","map":{"version":3,"sources":["C:/Users/Admin/Desktop/TripFinder/packages/hotel-next/pages/travel.js"],"names":["useState","useEffect","useContext","Head","SectionTourGrid","PostPlaceholder","SearchContext","GetAPIData","Paginator","SearchedData","SearchStateKeyCheck","ProcessAPIData","getDeviceType","SINGLE_POST_PAGE","LISTING_PAGE_POST_LIMIT","LISTING_PAGE_COLUMN_WIDTH_NORMAL","ListingWrapper","PostsWrapper","SearchWrapper","BreadcrumbWrapper","Sort","TripSearchForm","ListingPage","processedData","deviceType","state","dispatch","statekey","posts","setPosts","slice","loading","setLoading","newData","handleLoadMore","setTimeout","data","columnWidth","length","getServerSideProps","context","req","apiUrl","endpoint","name","pageData","props"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport Head from 'next/head';\r\nimport SectionTourGrid from 'components/SectionTourGrid/SectionTourGrid';\r\nimport { PostPlaceholder } from 'components/UI/ContentLoader/ContentLoader';\r\nimport { SearchContext } from 'context/SearchProvider';\r\nimport GetAPIData, {\r\n  Paginator,\r\n  SearchedData,\r\n  SearchStateKeyCheck,\r\n  ProcessAPIData,\r\n} from 'library/helpers/get_api_data';\r\nimport { getDeviceType } from 'library/helpers/get_device_type';\r\nimport { SINGLE_POST_PAGE } from 'settings/constant';\r\nimport {\r\n  LISTING_PAGE_POST_LIMIT,\r\n  LISTING_PAGE_COLUMN_WIDTH_NORMAL\r\n} from 'settings/config';\r\nimport ListingWrapper, {\r\n  PostsWrapper,\r\n  SearchWrapper,\r\n  BreadcrumbWrapper\r\n} from 'container/Listing/Listing.style';\r\n// import SearchForm from '../container/Home/Search/SearchForm';\r\nimport Sort from 'components/UI/Sort/Sort';\r\nimport { Breadcrumb } from 'antd';\r\nimport TripSearchForm from '../container/Home/TripSearch/TripSearchForm';\r\n\r\n\r\nexport default function ListingPage({ processedData, deviceType }) {\r\n  const { state, dispatch } = useContext(SearchContext);\r\n  const statekey = SearchStateKeyCheck(state);\r\n  const [posts, setPosts] = useState(\r\n    processedData.slice(0, LISTING_PAGE_POST_LIMIT) || []\r\n  );\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (statekey === true) {\r\n      const newData = SearchedData(processedData);\r\n      setPosts(newData);\r\n    } else {\r\n      setPosts(processedData.slice(0, LISTING_PAGE_POST_LIMIT) || []);\r\n    }\r\n  }, [statekey]);\r\n\r\n  const handleLoadMore = () => {\r\n    setLoading(true);\r\n    setTimeout(() => {\r\n      const data = Paginator(posts, processedData, LISTING_PAGE_POST_LIMIT);\r\n      setPosts(data);\r\n      setLoading(false);\r\n    }, 1000);\r\n  };\r\n\r\n  let columnWidth = LISTING_PAGE_COLUMN_WIDTH_NORMAL;\r\n\r\n  return (\r\n    <ListingWrapper>\r\n      <Head>\r\n        <title>Tour du lịch trọn gói</title>\r\n      </Head>\r\n      <BreadcrumbWrapper>\r\n        <Breadcrumb>\r\n          <Breadcrumb.Item href=\"/\">\r\n            <span>Trang chủ</span>\r\n          </Breadcrumb.Item>\r\n          <Breadcrumb.Item href=\"/tour\">\r\n            <span>Tất cả tour</span>\r\n          </Breadcrumb.Item>\r\n        </Breadcrumb>\r\n      </BreadcrumbWrapper>\r\n\r\n      <img src=\"https://bizweb.dktcdn.net/100/374/261/themes/747465/assets/cat-banner-2.jpg?1609693765185\" alt=\"banner\" />\r\n\r\n      <PostsWrapper>\r\n        <TripSearchForm />\r\n      </PostsWrapper>\r\n      <SearchWrapper>\r\n        <Sort />\r\n      </SearchWrapper>\r\n\r\n      <PostsWrapper>\r\n        <SectionTourGrid\r\n          link={SINGLE_POST_PAGE}\r\n          columnWidth={columnWidth}\r\n          deviceType={deviceType}\r\n          data={posts}\r\n          totalItem={processedData.length}\r\n          limit={LISTING_PAGE_POST_LIMIT}\r\n          loading={loading}\r\n          handleLoadMore={handleLoadMore}\r\n          placeholder={<PostPlaceholder />}\r\n        />\r\n      </PostsWrapper>\r\n    </ListingWrapper>\r\n  );\r\n}\r\n\r\nexport async function getServerSideProps(context) {\r\n  const { req } = context;\r\n  const apiUrl = [\r\n    {\r\n      endpoint: 'hotel',\r\n      name: 'listingHotel',\r\n    },\r\n  ];\r\n  const pageData = await GetAPIData(apiUrl);\r\n  const processedData = ProcessAPIData(pageData);\r\n  const deviceType = getDeviceType(req);\r\n  return {\r\n    props: { processedData, deviceType },\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}